/*
 * API_uart.c
 *
 *  Created on: Jul 27, 2023
 *      Author: lauta
 */


UART_HandleTypeDef uartHandle;

static void printUARTConfig();

bool uartInit()
{
	uartHandle.Instance = USART1;
	uartHandle.Init.BaudRate = 9600;
	uartHandle.Init.WordLength = UART_WORDLENGTH_B;
	uartHandle.Init.StopBits = UART_STOPBITS_1;
	uartHandle.Init.Parity = UART_PARITY_NONE;
	uartHandle.Init.Mode = UART_MODE_TX_RX;
	uartHandle.Init.HwFlowCtl = UART_HWCONTROL_NONE;

	if (HAL_UART_Init(&uartHandle) != HAL_OK)
	{
		return false;
	}

	printUARTConfig();
	return true;
}


static void printUARTConfig()
{
	char msg[100];
	sprintf(msg, "UART Config: BaudRate = %ld, WordLength = %d, StopBits = %d, Parity = %d, Mode = %d, HwFlowCtl = %d\r\n",
		    huart2.Init.BaudRate, huart2.Init.WordLength, huart2.Init.StopBits,
		    huart2.Init.Parity, huart2.Init.Mode, huart2.Init.HwFlowCtl);

	uartSendString((uint8_t*)msg);
}
