/*
 * API_SSD1306.c
 *
 *  Created on: Aug 05, 2023
 *      Author: Lautaro Quarin
 */


#include "API_SSD1306.h"

// Screenbuffer
static uint8_t SSD1306_Buffer[SSD1306_BUFFER_SIZE];

// Screen object
static SSD1306_t SSD1306;

void ssd1306_WriteCommand(uint8_t byte)
{
	HAL_I2C_Mem_Write(&SSD1306_I2C_PORT, SSD1306_I2C_ADDR, SSD1306_COMMAND_STREAM, 1, &byte, 1, HAL_MAX_DELAY);
}


void ssd1306_Init()
{

	//Time delay for the screen boot
	HAL_Delay(100);

	//Init OLED
	ssd1306_SetDisplayOn(0);

	ssd1306_WriteCommand(SSD1306_MEMORY_ADDR_MODE); //0x20


}





void ssd1306_SetDisplayOn(const uint8_t on)
{
	uint8_t command;
	if(on)
	{
		//Display on
		SSD1306.DisplayOn = 1;
		command = SSD1306_DISPLAY_ON; //0xAF
	} else
	{
		//Display off
		SSD1306.DisplayOn = 0;
		command = SSD1306_DISPLAY_OFF; //0xAE
	}
	ssd1306_WriteCommand(command);
}
